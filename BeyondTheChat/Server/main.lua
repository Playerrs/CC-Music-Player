---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by josue.
--- DateTime: 12/04/2023 23:14
---

--- Imports
local args = {...}
os.loadAPI("API/touchpoint")
local mon = peripheral.find("monitor")
local modemAPI = require("../API/ModemAPI")

--- Classes

local Chat = require("../Classes/Chat")
local Message = require("../Classes/Message")

--- Load

local tpMon = touchpoint.new("up")
local modem = modemAPI.startModem(tonumber(args[1]))

while true do
    print("Reavkik")
    local channel, receivedMessage = modemAPI.receive()
    local ms = Message:new(Chat:new(receivedMessage.chat), receivedMessage.content, receivedMessage.device)
    ms:getChat():addMessage(ms)
end
